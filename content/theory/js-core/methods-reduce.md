# –ú–µ—Ç–æ–¥—ã –º–∞—Å—Å–∏–≤–æ–≤ –≤ JavaScript: mutating vs non-mutating + reduce

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ

–ú–µ—Ç–æ–¥—ã –º–∞—Å—Å–∏–≤–æ–≤ ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –û—à–∏–±–∫–∏ –∑–¥–µ—Å—å –ø—Ä–∏–≤–æ–¥—è—Ç –∫:
- –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º –±–∞–≥–∞–º —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ React/Vue)
- –º—É—Ç–∞—Ü–∏—è–º props/state
- –ø—Ä–æ–±–ª–µ–º–∞–º —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π
- –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏

–ù–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö —á–∞—Å—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç:
- –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã **–º—É—Ç–∏—Ä—É—é—Ç –º–∞—Å—Å–∏–≤**
- —á–µ–º `map` –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `forEach`
- –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `reduce` –∏ –∫–æ–≥–¥–∞ –µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å

---

## –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

–ú–µ—Ç–æ–¥—ã –º–∞—Å—Å–∏–≤–æ–≤ –¥–µ–ª—è—Ç—Å—è –Ω–∞:
- **mutating** ‚Äî –∏–∑–º–µ–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤
- **non-mutating** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ / –∑–Ω–∞—á–µ–Ω–∏–µ

> –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã **non-mutating** –º–µ—Ç–æ–¥—ã.

---

## Mutating –º–µ—Ç–æ–¥—ã (–º–µ–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤)

–≠—Ç–∏ –º–µ—Ç–æ–¥—ã **–∏–∑–º–µ–Ω—è—é—Ç —Å–∞–º –º–∞—Å—Å–∏–≤**:

- `push`, `pop`
- `shift`, `unshift`
- `splice`
- `sort`
- `reverse`
- `fill`
- `copyWithin`

–ü—Ä–∏–º–µ—Ä:

```js
const arr = [1, 2, 3];
arr.push(4);

console.log(arr); // [1, 2, 3, 4]
```

‚ùó –û–ø–∞—Å–Ω–æ—Å—Ç—å:
- –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ ‚Äî —á–∞—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç—ã –º–µ–Ω—è–µ—à—å –µ–≥–æ ‚Äú–∑–∞ —Å–ø–∏–Ω–æ–π‚Äù —Å–∏—Å—Ç–µ–º—ã

---

## Non-mutating –º–µ—Ç–æ–¥—ã (–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ)

–≠—Ç–∏ –º–µ—Ç–æ–¥—ã **–Ω–µ –º–µ–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤**:

- `map`
- `filter`
- `reduce`
- `slice`
- `concat`
- `flat`, `flatMap`
- `toSorted`, `toReversed`, `toSpliced` (–Ω–æ–≤—ã–µ)

–ü—Ä–∏–º–µ—Ä:

```js
const arr = [1, 2, 3];
const next = arr.map(x => x * 2);

console.log(arr);  // [1, 2, 3]
console.log(next); // [2, 4, 6]
```

---

## map vs forEach

### map
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤**
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

```js
const doubled = arr.map(x => x * 2);
```

### forEach
- –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤**

```js
arr.forEach(x => console.log(x));
```

‚ùó –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `forEach` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ ‚Äî –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω.

---

## filter

–§–∏–ª—å—Ç—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ —É—Å–ª–æ–≤–∏—é:

```js
const evens = arr.filter(x => x % 2 === 0);
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤**.

---

## reduce ‚Äî —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –º–µ—Ç–æ–¥

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç reduce

`reduce` —Å–≤–æ–¥–∏—Ç –º–∞—Å—Å–∏–≤ –∫ **–æ–¥–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é**:
- —á–∏—Å–ª—É
- –æ–±—ä–µ–∫—Ç—É
- –º–∞—Å—Å–∏–≤—É
- Map / Set
- –ª—é–±–æ–º—É —Ç–∏–ø—É

–°–∏–≥–Ω–∞—Ç—É—Ä–∞:

```js
array.reduce((acc, item, index, array) => newAcc, initialValue)
```

---

## –ö–∞–∫ —á–∏—Ç–∞—Ç—å reduce (–º–æ–¥–µ–ª—å –≤ –≥–æ–ª–æ–≤–µ)

- `acc` ‚Äî –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä (–Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- `item` ‚Äî —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
- `initialValue` ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞

–í–∞–∂–Ω–æ:
> –¢–∏–ø `acc` = —Ç–∏–ø `initialValue`

---

## –ü—Ä–∏–º–µ—Ä—ã reduce (–æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ –ø–æ–ª–µ–∑–Ω–æ–º—É)

### –°—É–º–º–∞ —á–∏—Å–µ–ª

```js
const sum = [1, 2, 3].reduce((acc, x) => acc + x, 0);
```

### –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

```js
const count = ["a", "b", "a"].reduce((acc, x) => {
  acc[x] = (acc[x] || 0) + 1;
  return acc;
}, {});
```

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```js
const users = [
  { role: "admin", name: "A" },
  { role: "user", name: "B" },
];

const byRole = users.reduce((acc, u) => {
  acc[u.role] ||= [];
  acc[u.role].push(u);
  return acc;
}, {});
```

### FlatMap —á–µ—Ä–µ–∑ reduce

```js
const flat = [[1, 2], [3]].reduce(
  (acc, arr) => acc.concat(arr),
  []
);
```

---

## –¢–∏–ø–æ–≤—ã–µ –ª–æ–≤—É—à–∫–∏

### –õ–æ–≤—É—à–∫–∞ 1 ‚Äî –∑–∞–±—ã–ª–∏ initialValue

```js
[1, 2, 3].reduce((a, b) => a + b); // —Ä–∞–±–æ—Ç–∞–µ—Ç
[].reduce((a, b) => a + b); // üí• –æ—à–∏–±–∫–∞
```

–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π `initialValue`.

---

### –õ–æ–≤—É—à–∫–∞ 2 ‚Äî –º—É—Ç–∞—Ü–∏—è acc

```js
reduce((acc, x) => {
  acc.push(x);
  return acc;
}, []);
```

–≠—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ, –Ω–æ:
- `acc` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–Ω–æ–≤—ã–º –æ–±—ä–µ–∫—Ç–æ–º**
- –Ω–µ–ª—å–∑—è –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –º–∞—Å—Å–∏–≤

---

## –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reduce

- –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω `map` –∏–ª–∏ `filter`
- –∫–æ–≥–¥–∞ reduce —É—Ö—É–¥—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å
- –µ—Å–ª–∏ –∫–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ‚Äú—É–º–Ω–µ–µ‚Äù, –Ω–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–µ–µ

–ù–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ —Ü–µ–Ω—è—Ç **—É–º–µ—Å—Ç–Ω–æ—Å—Ç—å**, –∞ –Ω–µ ‚Äúreduce –≤–µ–∑–¥–µ‚Äù.

---

## –ö–∞–∫ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

1. –ù–∞–∑–≤–∞—Ç—å mutating –∏ non-mutating –º–µ—Ç–æ–¥—ã
2. –û–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É –º—É—Ç–∞—Ü–∏–∏ –æ–ø–∞—Å–Ω—ã –≤ UI
3. –†–∞—Å—Å–∫–∞–∑–∞—Ç—å `reduce`: –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä + initialValue
4. –ü—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
5. –£–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ reduce ‚Äî –º–æ—â–Ω—ã–π, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ª—É—á—à–∏–π

---

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –º–∞—Å—Å–∏–≤–æ–≤ –º—É—Ç–∏—Ä—É—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤?
2. –ß–µ–º map –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç forEach?
3. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç reduce –∏ —á—Ç–æ —Ç–∞–∫–æ–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä?
4. –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ initialValue?
5. –ö–æ–≥–¥–∞ reduce –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —Å—Ç–æ–∏—Ç?

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å
- State management
- React.memo / useMemo
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
