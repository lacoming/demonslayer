# Инструменты анализа производительности: DevTools, Performance, Lighthouse

## Зачем это нужно

Инструменты анализа — это способ **перестать гадать** и начать измерять.
Они позволяют:
- находить реальные узкие места
- подтверждать гипотезы цифрами
- улучшать Core Web Vitals
- уверенно отвечать на вопросы на собеседовании

На интервью часто спрашивают:
> «Какими инструментами ты пользуешься для анализа производительности?»

---

## Chrome DevTools — основа всего

### Вкладка Performance

Используется для анализа:
- рендеринга
- JS-исполнения
- layout / paint
- long tasks

Как работать:
1. Открыть DevTools → Performance
2. Нажать Record
3. Взаимодействовать со страницей
4. Stop → анализировать timeline

Что смотреть:
- **Main thread** (загрузка JS)
- **Frames** (провалы FPS)
- **Layout / Paint** события
- **Long Tasks** (>50ms)

---

## Long Tasks

**Long Task** — задача, блокирующая main thread более чем на 50мс.

Причины:
- тяжёлые вычисления
- большие бандлы
- синхронный JS

Последствия:
- лаги UI
- плохой INP

---

## Вкладка Network

Используется для:
- анализа загрузки ресурсов
- поиска блокирующих запросов
- проверки cache / compression

Что важно:
- TTFB
- размер бандлов
- waterfall
- preload / preconnect

---

## Lighthouse

### Что это

Lighthouse — автоматический аудит:
- Performance
- Accessibility
- Best Practices
- SEO

Запускается:
- из DevTools
- через CLI
- в CI

---

### Что показывает Lighthouse

- оценки (score)
- проблемы
- конкретные рекомендации

Важно:
> Lighthouse — ориентир, а не абсолютная истина.

---

## Web Vitals в DevTools

DevTools умеет показывать:
- LCP
- CLS
- INP

Можно:
- эмулировать сеть
- эмулировать устройство
- сравнивать результаты

---

## Типовые ловушки

### Ловушка 1 — доверять только Lighthouse

Он работает в лабораторных условиях.
Реальные пользователи ≠ Lighthouse.

---

### Ловушка 2 — оптимизация без измерений

Оптимизация без DevTools = гадание.

---

## Как отвечать на собеседовании

Хороший ответ:

1. Performance tab — анализ рендера и JS
2. Network — запросы и загрузка
3. Lighthouse — общий аудит
4. Смотрю LCP, CLS, INP
5. Проверяю long tasks и layout thrashing

---

## Вопросы для самопроверки

1. Что такое Long Task?
2. Чем Performance отличается от Lighthouse?
3. Какие метрики смотришь в первую очередь?
4. Почему Lighthouse не всегда точен?
5. Где смотреть блокирующие ресурсы?

---

## Связанные темы

- Rendering pipeline
- Core Web Vitals
- Performance API
- DevTools
