# Метрики производительности: FCP, LCP, CLS, TTI

## Зачем это нужно

Метрики производительности — это язык, на котором:
- браузер «говорит» о скорости сайта
- бизнес оценивает UX
- поисковые системы (Google) ранжируют страницы

На собеседованиях часто спрашивают:
- что такое FCP, LCP, CLS
- чем они отличаются
- как на них влиять на практике

---

## Core Web Vitals

Google выделяет ключевые метрики UX:

- **LCP** — скорость загрузки главного контента
- **CLS** — визуальная стабильность
- **INP** (раньше TTI/FID) — отзывчивость

Но TTI до сих пор часто спрашивают, особенно в теории.

---

## FCP — First Contentful Paint

### Что это

Момент, когда браузер впервые отрисовал **любой контент**:
- текст
- изображение
- svg
- canvas

```text
Пользователь видит, что «что‑то появилось»
```

### Что влияет

- Critical Rendering Path
- размер CSS
- блокирующий JS
- скорость сети

---

## LCP — Largest Contentful Paint

### Что это

Момент, когда отрисован **самый крупный видимый элемент**:
- hero image
- большой заголовок
- баннер

Это **главная метрика скорости**.

### Хорошие значения

- ≤ 2.5s — хорошо
- 2.5–4s — нормально
- > 4s — плохо

### Что влияет

- размер изображений
- preload
- server response time
- SSR / streaming

---

## CLS — Cumulative Layout Shift

### Что это

Метрика **визуальной стабильности**.
Показывает, насколько сильно элементы «прыгают» при загрузке.

```text
Кнопка уехала → плохой CLS
```

### Хорошие значения

- ≤ 0.1 — хорошо
- 0.1–0.25 — терпимо
- > 0.25 — плохо

### Причины плохого CLS

- изображения без размеров
- динамическая реклама
- поздняя подгрузка шрифтов
- вставка DOM выше контента

---

## TTI — Time To Interactive

### Что это

Время, когда страница:
- отображена
- обработчики навешены
- UI реагирует на ввод

❗ Метрика устаревшая, но всё ещё встречается.

### Почему заменили

TTI плохо отражает реальный UX.
Её заменили на **INP**.

---

## Как улучшать метрики

### FCP / LCP

- critical CSS
- preload hero-изображений
- оптимизация SSR
- сжатие ресурсов

### CLS

- всегда указывать width/height
- использовать aspect-ratio
- резервировать место под рекламу
- аккуратно работать с шрифтами

---

## Как отвечать на собеседовании

1. FCP — первый видимый контент
2. LCP — главный элемент (ключевая метрика)
3. CLS — визуальная стабильность
4. TTI — интерактивность (устаревшая)
5. Все метрики связаны с CRP и рендерингом

---

## Вопросы для самопроверки

1. Чем FCP отличается от LCP?
2. Почему CLS важен для UX?
3. Какие причины плохого CLS?
4. Почему TTI считается устаревшей?
5. Как SSR влияет на LCP?

---

## Связанные темы

- Critical Rendering Path
- SSR / Streaming
- Performance API
- Lighthouse
